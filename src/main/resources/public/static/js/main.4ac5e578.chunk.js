(this["webpackJsonpsofa-ui"]=this["webpackJsonpsofa-ui"]||[]).push([[0],{84:function(t,e,r){},85:function(t,e,r){},94:function(t,e,r){"use strict";r.r(e);var c,n,a,s=r(0),i=r.n(s),o=r(41),l=r.n(o),u=(r(84),r(85),r(5)),j="http://localhost:8080/api/v1",h=r(118),b=r(119),d=r(2),O=function(){var t=Object(s.useState)(),e=Object(u.a)(t,2),r=e[0],c=e[1];return Object(s.useEffect)((function(){if(void 0===r)fetch("http://localhost:8080/api/v1/statistics").then((function(t){return t.json()})).then((function(t){c(t)}))})),Object(d.jsxs)(h.a,{direction:"row",children:[Object(d.jsxs)(b.a,{children:[Object(d.jsx)(b.b,{children:"Artists"}),Object(d.jsx)(b.c,{children:null===r||void 0===r?void 0:r.totalArtists})]}),Object(d.jsxs)(b.a,{children:[Object(d.jsx)(b.b,{children:"Tracks"}),Object(d.jsx)(b.c,{children:null===r||void 0===r?void 0:r.totalTracks})]}),Object(d.jsxs)(b.a,{children:[Object(d.jsx)(b.b,{children:"Audio length"}),Object(d.jsx)(b.c,{children:null===r||void 0===r?void 0:r.totalAudioLength})]}),Object(d.jsxs)(b.a,{children:[Object(d.jsx)(b.b,{children:"Total file size"}),Object(d.jsx)(b.c,{children:null===r||void 0===r?void 0:r.totalFileSize})]}),Object(d.jsxs)(b.a,{children:[Object(d.jsx)(b.b,{children:"Playlists"}),Object(d.jsx)(b.c,{children:(null===r||void 0===r?void 0:r.totalPlayLists)||0})]})]})},p=r(116),f=r(111),x=r(71),v=r.n(x),m=r(75),y=r(31),k=r.n(y),g=r(50),S=r(27),w=r(29),T=r(30),C=r(3),I=(c=function(){function t(){Object(S.a)(this,t),this.albumcache=new Map,Object(C.m)(this)}return Object(w.a)(t,[{key:"albums",get:function(){return this.albumcache}},{key:"findAlbumById",value:function(){var t=Object(g.a)(k.a.mark((function t(e){var r,c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.albumcache.has(e)){t.next=8;break}return t.next=3,fetch("http://localhost:8080/api/v1/albums/id"+"/".concat(e));case 3:return t.next=5,t.sent.json();case 5:r=t.sent,c=r.data,this.albumcache.set(e,c);case 8:return t.abrupt("return",this.albumcache.get(e));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),Object(T.a)(c.prototype,"findAlbumById",[C.f],Object.getOwnPropertyDescriptor(c.prototype,"findAlbumById"),c.prototype),c),A=r(105),B=r(106),F=Object(m.a)((function(t){var e,r,c,n=t.track,a=t.context,i=Object(s.useState)(""),o=Object(u.a)(i,2),l=o[0],h=o[1],b=Object(s.useState)(""),O=Object(u.a)(b,2),p=O[0],f=O[1];new I;return Object(s.useEffect)((function(){var t;console.log("".concat(n)),console.log("SELECTED "+a.playerStore.currentTrack),h((null===(t=a.playerStore.currentTrack)||void 0===t?void 0:t.hashId)||""),a.playerStore.currentTrack&&a.albumStore.findAlbumById(a.playerStore.currentTrack.albumHashId).then((function(t){f((null===t||void 0===t?void 0:t.coverUrl)||"")}))}),[a.playerStore.currentTrack]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(v.a,{src:(c=l,console.log("Full stream url: ".concat(j+"/stream/"+c)),j+"/stream/"+c),autoPlay:!0,controls:!0}),Object(d.jsx)(A.a,{src:p}),Object(d.jsxs)(B.a,{children:[null===(e=a.playerStore.currentTrack)||void 0===e?void 0:e.artistName," - ",null===(r=a.playerStore.currentTrack)||void 0===r?void 0:r.trackName]})]})})),E=r(115),P=(n=function(){function t(){Object(S.a)(this,t),this.currentTrackHashId="",this.currentTrack=void 0,Object(C.m)(this),this.currentTrack=void 0}return Object(w.a)(t,[{key:"trackHashId",get:function(){return this.currentTrackHashId}},{key:"playTrack",value:function(t){console.log("Store select "),console.log(t),t instanceof String?this.currentTrackHashId=t:(this.currentTrack=t,this.currentTrackHashId=t.hashId)}}]),t}(),Object(T.a)(n.prototype,"playTrack",[C.f],Object.getOwnPropertyDescriptor(n.prototype,"playTrack"),n.prototype),n),z=(a=function(){function t(){Object(S.a)(this,t),this.artistsCache=new Map,Object(C.m)(this)}return Object(w.a)(t,[{key:"artists",get:function(){return this.artistsCache}},{key:"findArtistById",value:function(){var t=Object(g.a)(k.a.mark((function t(e){var r,c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.artistsCache.has(e)){t.next=8;break}return t.next=3,fetch("http://localhost:8080/api/v1/artists/id"+"/".concat(e));case 3:return t.next=5,t.sent.json();case 5:r=t.sent,c=r.data,this.artistsCache.set(e,c);case 8:return t.abrupt("return",this.artistsCache.get(e));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),Object(T.a)(a.prototype,"findArtistById",[C.f],Object.getOwnPropertyDescriptor(a.prototype,"findArtistById"),a.prototype),a),D=function t(){Object(S.a)(this,t),this.playerStore=void 0,this.albumStore=void 0,this.artistStore=void 0,Object(C.m)(this),this.playerStore=new P,this.albumStore=new I,this.artistStore=new z},H=r(113),N=r(114),L=r(108),M=r(117),J=r(107),U=r(109),G=function(t){var e=t.album;return Object(d.jsxs)(J.a,{templateColumns:"repeat(2, 1fr)",style:{width:"800px"},gap:6,children:[Object(d.jsx)(L.a,{w:"20%",h:"10",bg:"blue.500",children:Object(d.jsx)(U.a,{name:e.name,src:e.coverUrl})}),Object(d.jsx)(L.a,{w:"80%",h:"10",bg:"blue.500",children:Object(d.jsxs)(B.a,{children:[e.artist.name," - ",e.name]})})]})},q=function(t){var e=t.albums;return Object(d.jsx)(L.a,{children:null===e||void 0===e?void 0:e.map((function(t){return Object(d.jsx)(G,{album:t},t.hashId+t.name)}))})},K=function(t){var e=t.artist;return Object(d.jsx)(J.a,{templateColumns:"repeat(2, 1fr)",style:{width:"800px"},gap:6,children:Object(d.jsx)(L.a,{w:"80%",h:"10",bg:"blue.500",children:Object(d.jsx)(B.a,{children:e.name})})})},Q=function(t){var e=t.artists;return Object(d.jsx)(L.a,{children:null===e||void 0===e?void 0:e.map((function(t){return Object(d.jsx)(K,{artist:t},t.hashId)}))})},R=r(110),V=function(t){var e=t.track,r=t.onClick;return Object(d.jsx)(J.a,{templateColumns:"repeat(2, 1fr)",gap:6,children:Object(d.jsx)(L.a,{w:"100%",h:"10",bg:"blue.500",children:Object(d.jsxs)(R.a,{onClick:function(t){return r(e)},children:["  ",e.artistName," - ",e.trackName]})})})},W=function(t){var e=t.tracks,r=t.onClick;return Object(d.jsx)(L.a,{children:null===e||void 0===e?void 0:e.map((function(t){return Object(d.jsx)(V,{onClick:r,track:t},t.hashId+t.trackName)}))})},X=function(t){var e=t.context,r=Object(s.useState)(""),c=Object(u.a)(r,2),n=c[0],a=c[1],i=Object(s.useState)(),o=Object(u.a)(i,2),l=o[0],j=o[1];return Object(s.useEffect)((function(){n&&n.length>=3&&fetch("".concat("http://localhost:8080/api/v1/indexes/autocomplete","?text=").concat(n)).then((function(t){return t.json()})).then((function(t){j(t),console.log(t)}))}),[n]),Object(d.jsxs)(f.a,{children:[Object(d.jsx)(L.a,{w:300,children:Object(d.jsx)(M.a,{placeholder:"input search",onChange:function(t){return a(t.target.value)}})}),Object(d.jsxs)(L.a,{children:[Object(d.jsx)(q,{albums:null===l||void 0===l?void 0:l.albums}),Object(d.jsx)(Q,{artists:null===l||void 0===l?void 0:l.artists}),Object(d.jsx)(W,{onClick:function(t){e.playerStore.playTrack(t)},tracks:null===l||void 0===l?void 0:l.tracks})]})]})},Y=function(t){var e=t.rootStore;return Object(d.jsxs)(H.a,{justify:"space-between",borderBottom:"1px",borderColor:"gray.200",p:3,children:[Object(d.jsx)(N.a,{as:"h3",size:"lg",m:1,children:"Sofa Streamer"}),Object(d.jsx)(N.a,{as:"h3",size:"lg",m:1,children:Object(d.jsx)(X,{context:e})})]})},Z=r(10),$=r(39),_=r(72),tt=Object($.a)(Object($.a)({},_.theme),{},{fonts:{body:"system-ui, sans-serif",heading:"Georgia, serif",mono:"Menlo, monospace"},colors:Object($.a)(Object($.a)({},_.theme.colors),{},{brand:{900:"#1a365d",800:"#153e75",700:"#2a69ac"},teal:{500:"#319795"},dandelion:{100:"#FFE066",200:"FFDA49"}})}),et=function(t){t.rootStore;return Object(d.jsxs)(H.a,{justify:"space-between",borderBottom:"1px",borderColor:"gray.200",p:3,children:[Object(d.jsx)(N.a,{as:"h3",size:"lg",m:1,children:"Sofa Streamer"}),Object(d.jsx)(N.a,{as:"h3",size:"lg",m:1})]})};var rt=function(){var t=new D;return Object(d.jsxs)(Z.c,{theme:tt,children:[Object(d.jsx)(E.a,{}),Object(d.jsxs)(p.a,{children:[Object(d.jsx)(Y,{rootStore:t}),Object(d.jsx)(f.a,{children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(O,{}),Object(d.jsx)(F,{context:t,track:void 0})]})}),Object(d.jsx)(et,{rootStore:t})]})]})},ct=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,120)).then((function(e){var r=e.getCLS,c=e.getFID,n=e.getFCP,a=e.getLCP,s=e.getTTFB;r(t),c(t),n(t),a(t),s(t)}))};l.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(rt,{})}),document.getElementById("root")),ct()}},[[94,1,2]]]);
//# sourceMappingURL=main.4ac5e578.chunk.js.map